var VideoRichHoverHandler,VideoRichHover;(function(n){function gt(n,t,i,r){lt&&(!i||!i.bindInfos||i.bindInfos.length<1||(u[n]=i,t&&o(st,ni),at=r,k(i.bindInfos)))}function ni(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)k(u[i]?u[i].bindInfos:null);else k(u[t]?u[t].bindInfos:null)}function k(n){var r,s,t,c,u,o,i,a,f;if(n){for(r=0;r<n.length;r++)if(s=n[r].id,t=n[r].target,s&&t&&t.bcn&&t.tcn&&(c=_ge(s),c&&(u=w(t.bcn,c),u&&u.length>0)))for(o=0;o<u.length;o++)i=u[o],i&&(a=nt(i,l),a&&(f=t.tcn===t.bcn?i:ct(t.tcn,i),f&&!e(f,it)&&(f[it]=!0,h(f,"mousemove",oi,!1,!1),h(i,"mouseout",pt,!1,!1))));h(_w,"focus",ti,!0);at||h(_w,"blur",ii,!0)}}function d(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function ti(){d(i.HoverEnableEvt)}function ii(){_d.activeElement!=null&&(_d.activeElement!=sj_b?(v(),d(i.HoverDisableEvt)):d(i.HoverEnableEvt))}function g(n){for(var t=n,i;t!=null;){if(i=nt(t,l),i)return i;if(a(t,rt))return g(r);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function nt(n,t){var i,r;if(n){if(s(n,t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=nt(n.children[i],t),r)return r}return null}function ri(n,t,i){for(var r=n;r;){if(r.id==i)return null;if(a(r,t))return r;r=r.parentElement}return null}function ui(n,t){return tt(n,t,VRHEnums.HoverTargetType.Boundary)}function fi(n,t){return tt(n,t,VRHEnums.HoverTargetType.Target)}function tt(n,t,i){var r,e,o,f,s;if(n&&t&&(r=u[t]?u[t].bindInfos:null,r&&r.length>0))for(e=0;e<r.length;e++){o=r[e];f=null;switch(i){case VRHEnums.HoverTargetType.Boundary:f=o.target.bcn;break;case VRHEnums.HoverTargetType.Target:f=o.target.tcn}if(f&&(s=ri(n,f,o.id),s))return s}return null}function ei(n){for(var t=n;t;){if(a(t,rt))return!0;t=t.parentElement}return!1}function vt(n){var t=null,r=null,i=null,f=null,u=null;if(s(n,l)===!0&&(u=e(n,l)),u==null)return null;try{t=JSON.parse(u);i=t.capt;i&&(f={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved});r={ma:!!(t.bv&2),at:!!(t.bv&4),capt:f,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5,mid:t.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl}}catch(o){r=null}return r}function oi(n){var h=sj_et(n),s=g(h),t,c,i,u,o,l;if(!s){r&&v();return}if((t=vt(s),t&&t.cid)&&(c=fi(h,t.cid),c!==r)&&(r=c,i=parseInt(e(s,"ht")),i||(i=0),!(i>=0)||!(i<f.length)||f[i]!==!1)&&(u=ui(h,t.cid),u)&&(o=u.getElementsByTagName("img"),o&&o.length>0)){var w=o[0].clientHeight,k=o[0].clientWidth,a=u.clientWidth,y=u.clientHeight;t.capt&&t.capt.sk&&(t.capt.sk=hi(u));l={containerId:t.cid,containerHeight:y,containerWidth:a,hoverType:i,thumbnailHeight:Math.min(y,w),thumbnailWidth:Math.min(a,k),videoRichHoverMetaData:t,instMetaData:null,hoveredElement:u};b&&(p=b(s,i,t.cid),l.instMetaData=p);dt(ot,l,u,si(t))}}function si(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function hi(n){var t,u,f,e,i,r;if(!n)return null;if(t=w("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=ht(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function yt(){r!==null&&(r=null,p=null)}function pt(n){if(r){var t=wt(sj_mo(n));t!==wt(r)&&r&&v()}}function wt(n){var i,f,t;return ei(n)&&(n=r),i=g(n),f=null,i&&(t=vt(i),t&&(f=tt(n,t.cid,u[t.cid].hmot))),f}function v(){sj_evt.fire(i.HoverCancelEvt);yt()}function ci(n){n&&n.length>1&&pt(n[1])}function li(n,t,i){for(var o="h",h="data-h",r,u,f,c;n!=null;){if((s(n,o)||s(n,h))&&(r=e(n,o)||e(n,h),r&&(u=r.match(/ID=[\w]+(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),u)))return f=u[0].substr(3).split(","),c={AppNS:f[0],K:f[1],HoverType:t,HoverContainerId:i},c;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return null}function ai(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<f.length&&t>=0&&(f[t]=!0)}}function vi(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<f.length&&t>=0&&(f[t]=!1)}}function yi(){t&&t.gebc&&t.ha&&t.ga&&t.hc&&t.guw&&bt&&i&&y&&y.bind&&(s=t.ha,w=t.gebc,e=t.ga,kt=t.guw,a=t.hc,ht=t.gcn,ct=t.gfbc,h=y.bind,ft=i.HoverDisableEvt,ut=i.HoverEnableEvt,ot=i.HoverMouseInEvt,et=i.HoverStopEvt,b=li,st=i.HoverAsyncBindEvt,r=null,o(i.PlayerEndEvt,v),o(i.HoverCleanupEvt,yt),o(et,ci),o(ut,ai),o(ft,vi),lt=!0)}var c="undefined",t=typeof pMMUtils!=c?pMMUtils:null,bt=typeof VideoRichHoverUtils!=c?VideoRichHoverUtils:null,y=typeof SmartEvent!=c?SmartEvent:null,i=typeof VRHConsts!=c?VRHConsts:null,it="vrhatt",l="vrhm",rt="vrhc",r=null,p=null,ut=null,ft=null,et=null,ot=null,st=null,f=[!0,!0],s=null,e=null,w=null,a=null,ht=null,kt=null,h=null,o=sj_evt.bind,dt=sj_evt.fire,ct=null,b,lt=!1,u={},at=!1;n.init=gt;yi()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function bt(){u&&i&&it&&tt&&!rt&&(b=tt.bind,h=u.ga,ft=u.gcn,y=u.sa,ut=u.sc,o=u.hc,et=u.sp,d=u.goh,k=u.gow,ot=u.go,wt=u.sh,ht=u.sw,st=it.showElement,dt(),rt=!0,sj_evt.fire(i.HoverReadyEvt))}function kt(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(a[t]||(a[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=r&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n.isAsyncBind,n,n.bh))}function dt(){sj_evt.bind(i.HoverMouseInEvt,si);sj_evt.bind(i.PlayerLoadEvt,gt);sj_evt.bind(i.PlayerStartEvt,ni);sj_evt.bind(i.PlayerEndEvt,lt);sj_evt.bind(i.PlayerErrEvt,lt);sj_evt.bind(i.HoverCancelEvt,fi)}function ct(n){return n&&n.length>2&&n[2]===nt}function gt(){}function ni(n){ct(n)&&sj_evt.fire(i.CaptionHideEvt,n[1])}function lt(n){ct(n)&&v()}function ti(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function at(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function ii(n){var v=n.containerId,s=a[v],u,g,ct,lt,p,vt,tt,k;if(s&&(s.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=s.chflturl),s.tw&&(n.containerWidth=n.thumbnailWidth=s.tw),s.th&&(n.thumbnailHeight=s.th),e=_ge(v),e)){var d=s.isInline,w=d?n.containerWidth:n.thumbnailWidth,yt=d?n.containerHeight:n.thumbnailHeight,rt="data-tag",pt=h(e,rt),et=ft(e),ot=et.replace(" hide",""),it=ui(ri(n.hoveredElement,s));if(t=sj_ce("div",null,ot),ut(t,et),y(t,rt,pt),it?(t.appendChild(it),it.innerHTML=e.innerHTML):t.innerHTML=e.innerHTML,l=n.instMetaData,u=n.videoRichHoverMetaData,g=0,typeof CaptionContainer!=r&&CaptionContainer.init&&CaptionContainer.init(v,t,w,!0,u.capt,n.instMetaData,n.hoveredElement),ct={containerWidth:w,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at},typeof MultiMotionStaticThumbnail!=r&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(v,t,ct,s,n.instMetaData),g=MultiMotionStaticThumbnail.clientHeight(v)),lt={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:n.thumbnailHeight,thumbnailWidth:w,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:a[v].mmstcnt,clipsCount:u.cc,clipsTimeline:oi(u.ct,u.cc),updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:s.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:s.pcc>0&&u.bci>0?u.bci+s.pcc-1:0},typeof ThumbnailPlayer!=r&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(v,w,n.hoverType,s,t,nt,lt,n.instMetaData),g+=ThumbnailPlayer.clientHeight(v)),p=null,d?(p=f,vt=Math.max(0,yt-g),sj_evt.fire(i.HoverCaptionHUpdateEvt,vt)):(tt=at(c.boundaryElIds),tt||(tt=_d.body),p=tt),p){if(k=p.firstChild,o(k,ot)&&(p.removeChild(k),k=p.firstElementChild),p.insertBefore(t,k),ht(t,w),st(t,!0),!d&&!vi(f,t,s)){sj_evt.fire(i.HoverCancelEvt);return}sj_evt.fire("focusChange",t);b(t,"mouseout",hi);s.ic&&b(t,"click",ci)}}}function ri(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],o(n,f.target.bcn)&&(e=f.target.tacn,i=vt(n),i&&i.length>0))for(r=0;r<i.length;r++)if(o(i[r],e))return i[r];return null}function ui(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=h(n,"h"),i&&y(t,"h",i),r=h(n,"aria-label"),r&&y(t,"aria-label",r),t):null}function fi(){p===!0?s||(s=function(){sj_evt.fire(VRHConsts.StopPlayEvt,l);v();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,l),v());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function ei(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function oi(n,t){if(typeof n!=r&&typeof t!=r&&typeof enableMockImages!==r&&enableMockImages()){var u=n.split(","),i=pt.split(",");return i.length=Math.min(u.length,t),i.join(",")}return n}function si(n){var r,t,u;if(n&&n.length>2){if(r=n[2],t=n[1],!t||!t.containerHeight||!t.containerWidth||!t.videoRichHoverMetaData)return;if(p===!0)return;if(r&&r!==f)f!=null&&v(),f=r,w=t;else return;if(u=a[t.containerId],!u)return;c=u;p=!0;s=null;sb_st(function(){sj_evt.fire(i.HoverStartEvt,t.instMetaData);ii(t);s&&(s(),s=null);p=!1},u.hoverdelayms)}}function hi(n){g(sj_mo(n))||sj_evt.fire(i.HoverStopEvt,n)}function ci(n){var s=sj_et(n),l,e,u,o;if(g(s)&&!ei(s)&&f&&t&&w&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+h(f,"h"),l=w.hoverType,e=!1,l===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=r&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),e=!0):n.ctrlKey||n.button==1||(u=ai(li(f,c?c.bindInfos:null)),u&&(o=document.createEvent("MouseEvents"),o.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,u),u.dispatchEvent(o),typeof si_ct=="function"&&si_ct(u)),e=!0),sj_evt.fire(i.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),v(),e)){sj_pd(n);sj_sp(n);return}}function li(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!o(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function vt(n){return n?n.getElementsByTagName("a"):null}function ai(n){var i=vt(n),t;if(i)for(t=0;t<i.length;t++)if(!g(i[t]))return i[t];return n}function g(n){while(n!=null){if(o(n,yt))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function v(){if(t!=null){var n=t.parentElement;n&&n.removeChild(t);t.innerHTML=null;t=null;sj_evt.fire(VRHConsts.HoverMouseOutEvt,l)}l=null;f=null;w=null}function vi(n,t,i){var r=yi(t,n,i);return r?(et(t,r.l,r.t),!0):!1}function yi(n,t,i){var e,h,l;if(!i||!n||!t||(e=ti(t,at(c.boundaryElIds)),!e))return null;var f=pi(e,i),a=ot(t,!0,!1,e),r=a[0],u=a[1],o=k(t),s=d(t);if(f.l>r+o/2||f.t>u+s/2||f.r<r+o/2||f.b<u+s/2)return null;h=k(n);l=d(n);r-=(h-o)/2;r=Math.ceil(r);r=Math.min(r,f.r-h-2);r=Math.max(r,f.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(l-s)/2}return u=Math.floor(u),u=Math.min(u,f.b-l-2),u=Math.max(u,f.t),{l:r,t:u}}function pi(n){var t=n?0:sb_de.scrollLeft,i=n?0:sb_de.scrollTop,r=n.clientWidth,u=n.clientHeight;return{l:t,t:i,r:r,b:u}}var nt="VRTP",yt="vrhc",r="undefined",pt="0.000,60.000,120.000,180.000",u=typeof pMMUtils!=r?pMMUtils:null,tt=typeof SmartEvent!=r?SmartEvent:null,it=typeof VideoRichHoverUtils!=r?VideoRichHoverUtils:null,i=typeof VRHConsts!=r?VRHConsts:null,e=null,t=null,f=null,rt=!1,b=null,ut=null,h=null,y=null,ft=null,et=null,wt=null,k=null,d=null,ot=null,o=null,st=null,ht=null,p=!1,c=null,w,l=null,a={},s;n.init=kt;bt()}(VideoRichHover||(VideoRichHover={}))