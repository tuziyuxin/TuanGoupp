var MySaves;(function(n){function ht(){sj_evt.bind("ClientLinkAction_Loaded",pt,!0);t&&(f.bind(t,v,function(){return c(et)}),f.bind(t,ut,function(){return c(b)}),f.bind(_d.body,v,lt),f.bind(_d.body,ft,at));nt()&&ct()}function ct(){var n=i.gfbc("infact",_ge("vmc")),t,r;n&&n.firstChild&&(t=n.firstChild,r=t.getAttribute("data-tooltip"),r==rt&&t.setAttribute(l,"1"))}function lt(t){var r=sj_et(t),i=g(r);i&&(n.selectedElement=i,e==null&&o(i))}function at(t){var f=t.keyCode,r,i,u;f===st&&(r=sj_et(t),i=g(r),i?(n.selectedElement=i,o(i),yt(),d(t)):r==k&&(u=vt(n.selectedElement),u&&(u.focus(),d(t))))}function vt(n){var r,t,i;if(n&&(r=u(n,"infsec"),r&&(t=r.getElementsByTagName("A"),t&&t.length>1)))for(i=0;i<t.length;i++)if(t[i]==n.parentElement&&i<t.length-1)return t[i+1];return null}function d(n){sj_pd(n);sj_sp(n)}function yt(){var n,i;t&&(n=t.getElementsByTagName("A"),n&&n.length>1&&(i=n[0],i.focus(),k=n[1]))}function g(n){var r,i;if(n){if(r=u(n,"ms_ba_op"),r&&r.parentElement==t)return null;if(i=n.parentNode,i&&i.hash&&i.hash.indexOf(p)===0)return i;if(n.hash&&n.hash.indexOf(p)===0)return n}return null}function pt(n){if(n&&n[1]){var t=n[1];t.bind("Save",wt,!0);t.bind("Unsave",gt,!0);t.bind("OnMoveTo",bt,!0)}}function wt(t){var i=h(t);i&&(n.saveFunction(i,function(n){n&&n.IsSuccess||s(!1,t)}),n.selectedElement=t,(!_w.MySavesEdu||MySavesEdu.doneFiring)&&o(t),clearTimeout(e),e=setTimeout(function(){e=null},1500),s(!0,t));FavLog.l(FavLog.Type.Click,FavLog.Meta.Save,n.componentType)}function bt(t){n.abstractOnMoveTo(t)}function kt(){var n=parseQueryParams().q;return{title:n?decodeURI(n):null}}function o(n,u){var y,l,p;if(u===void 0&&(u="down"),t&&n&&!(it()&&n.id==="mb_fav")){r&&clearTimeout(r);var o=n.getBoundingClientRect(),a="Top",v=sj_go(n,a),s=sj_go(_ge("vm_c"),a),k=_w.innerHeight;(tt()||it()&&w)&&(s+=sj_go(w,"Top"));switch(u){case"up":i.sb(t,k-v+s);break;case"down":default:i.st(t,v+o.height-s)}var e="",f="",h=_d.body.offsetWidth;h-o.right>200?(y=5,f=Math.max(o.right-100+_w.pageXOffset,y-o.left),tt()&&(f-=ot.getBoundingClientRect().left,f<0&&(f=0))):(e=h-o.right-60+_w.pageXOffset,f="",e<0&&(e=0),l=t.getBoundingClientRect(),p=l.width<250?250:l.width,p+e>h&&(e="",f=10));i.sr(t,e);i.sl(t,f);i.sdt(t,DisplayType.InlineBlock);r=setTimeout(function(){c(b)},1)}}function nt(){var n=_w.location.href.toLowerCase();return n.indexOf("&testhooks=~1")>0&&n.indexOf("&vpt=1")>0}function dt(){var n=i.gebc("mystuff",_d)[0];n&&i.ac(n,l)}function c(u){r?clearTimeout(r):FavLog.l(FavLog.Type.Show,FavLog.Meta.ShowBalloon,n.componentType);i.ac(t,y);var f=function(){i.rc(t,y);r=setTimeout(function(){t&&i.sdt(t,DisplayType.Default);n.selectedElement=null;r=null},500)};nt()||(dt(),r=setTimeout(f,u))}function gt(u){var f=h(u);f||(f=h(n.selectedElement),u=n.selectedElement);f&&(n.unsaveFunction(f,function(n){n&&n.IsSuccess||s(!0,u)}),s(!1,u),t&&(r&&clearTimeout(r),i.sdt(t,DisplayType.Default)));FavLog.l(FavLog.Type.Click,FavLog.Meta.Unsave,n.componentType)}function s(n,t){if(t){var r=u(t,"iuscp")||u(t,"iuscwrapper");r&&(n?i.ac(r,a):i.rc(r,a))}}function h(t){if(t){if(typeof MySavesMetadataProvider!="undefined")return MySavesMetadataProvider.getMetadata(t);if(t=u(t,"iuscp"),t)return JSON.parse(i.ga(t.querySelector(".iusc"),"m"))}else if(typeof n.contextMetadata!="undefined")return n.contextMetadata;return null}function u(n,t){while(n){if(i.hc(n,t))return n;n=n.parentElement}return null}function tt(){return typeof ImageDetailV2!="undefined"&&ImageDetailV2.isRightRailShown()}function it(){return typeof MobileImageDetail!="undefined"}var l="vptest",rt="Save this",a="saved",v="mouseover",ut="mouseout",ft="keydown",et=99999,f=SmartEvent,i=pMMUtils,r,y="show",p="#CA!Unsave",w=_ge("insights"),ot=_ge("insights_wrap"),b=3e3,e=null,t=_ge("ms_ba"),st=9,k=null;n.init=ht;n.abstractOnMoveTo=function(){return null};n.getSpecifier=kt;n.showBalloon=o;n.getMetadata=h})(MySaves||(MySaves={}));MySaves.init()