(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(n.clarity={})})(this,function(n){"use strict";function ir(){nt.reset()}function ht(n){var i,r,u,f,t,e;if(n===null||typeof n!="object")return n;if(i=[],n.constructor===Object)for(r=Object.keys(n),t=0;t<r.length;t++)u=r[t],f=n[u],i.push(ht(f));else if(n.constructor===Array)for(t=0;t<n.length;t++)e=ht(n[t]),i.push(e);return i}function ur(n,t,i){var r=null,u;return Worker&&(u=er(n),r=new Worker(u),r.onmessage=t||null,r.onerror=i||null),r}function fr(){function h(t,r,o){var s=JSON.stringify(t);n>0&&n+s.length>f.batchLimit&&u(r);e=i.length===0&&o;i.push(t);n+=s.length;n>=f.batchLimit&&u(r)}function u(t){if(n>0&&!e){r.sequenceNumber=s++;r.time=t;var u={envelope:r,events:i},f=JSON.stringify(u),h=o(f);i=[];n=0;c(h,u)}}function c(n,i){var r={type:2,compressedData:n,rawData:i};t.postMessage(r)}var t=self,o=t.compress,f=t.config,r=t.envelope,i=[],n=0,s=0,e=!1;self.onmessage=function(n){var i=n.data,t,r;switch(i.type){case 0:t=i;h(t.event,t.time,t.isXhrErrorEvent);break;case 1:r=i;u(r.time)}}}function er(n){var i=fr.toString(),r=i.substring(i.indexOf("{")+1,i.lastIndexOf("}")),u="self.compress="+ui.toString()+";"+("self.config="+JSON.stringify(t)+";")+("self.envelope="+JSON.stringify(n)+";")+r,f=new Blob([u],{type:"application/javascript"});return URL.createObjectURL(f)}function sr(n){var t=n.error||n,i=n.filename,r=n.lineno,u=n.colno,f=t.message,e=t.stack,o={type:0,message:f,stack:e,lineno:r,colno:u,source:i};h(o)}function fi(){var n=(new Date).getTime();return window.performance&&performance.now&&(n+=performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})}function hr(n,t,i){var r=null,u,f;i&&(r=new Date,r.setDate(r.getDate()+i));u=r?"expires="+r.toUTCString():"";f=t+";"+u+";path=/";document.cookie=n+"="+f}function ei(n){var r=document.cookie.split(";"),i,t;if(r)for(i=0;i<r.length;i++)if(t=r[i].split("="),t&&t.length>1&&t[0].indexOf(n)>=0)return t[1];return null}function ct(n,t,i,r){var u,f,e;r=r||{};for(u in n)(!i||n.hasOwnProperty(u))&&(f=n[u],e=t?t(u,f):f,typeof e!="undefined"&&(r[u]=e));return r}function lt(n,t,i){var u,f,r;for(i===void 0&&(i=!0),u=[n];u.length>0;){for(f=u.shift(),r=f.firstChild;r;)u.push(r),r=r.nextSibling;(f!==n||i)&&t(f)}}function at(n){return typeof n=="number"&&!isNaN(n)}function vt(n,t,i){if(n===!1){b(">>> Clarity Assert failed\nSource: "+t+"\nComment: "+i);var r={type:5,source:t,comment:i};h(r)}}function b(n){t.debug&&console.log&&console.log("(Clarity) "+n)}function yt(n){return n[0]}function pt(n){return n.replace(/./g,"*")}function lr(){oi=cr.concat(t.sensitiveAttributes);tt=""}function r(n){return n&&e in n?n[e]:null}function ar(n,i,r){var u=null,e=r||!t.showText,o=r||!t.showImages,f;if(i)u=hi(n);else switch(n.nodeType){case Node.DOCUMENT_TYPE_NODE:u=vr(n);break;case Node.TEXT_NODE:u=pr(n,e);break;case Node.ELEMENT_NODE:f=n;u=f.tagName==="STYLE"?yr(f,e):si(f,e,o);break;default:u=hi(n)}return u}function vr(n){var t=it(n,s.Doc);return t.attributes={name:n.name,publicId:n.publicId,systemId:n.systemId},t}function si(n,t,r){var f=n.tagName,u=it(n,f);return f===s.Script||f===s.Meta?(u.tag=s.Ignore,u):(u.attributes=br(n,t,r),u.layout=wr(n),u.style=u.layout?kr(n):null,u.layout&&u.style&&(i.OverflowX in u.style||i.OverflowX in u.style)&&(u.layout.scrollX=Math.round(n.scrollLeft),u.layout.scrollY=Math.round(n.scrollTop)),u)}function yr(n,i){var u=si(n,i,!1),r,e,f;if(t.cssRules){r=u.cssRules=null;try{e=n.sheet;r=e?e.cssRules:[]}catch(o){if(o.name!=="SecurityError")throw o;}if(r!==null)for(u.cssRules=[],f=0;f<r.length;f++)u.cssRules.push(r[f].cssText)}return u}function pr(n,t){var i=n.parentNode,u=i&&i.nodeType===Node.ELEMENT_NODE&&i.tagName==="STYLE",f=u||!t,r=it(n,s.Text);return r.content=f?n.nodeValue:pt(n.nodeValue),r}function hi(n){var t=it(n,s.Ignore);return t.nodeType=n.nodeType,n.nodeType===Node.ELEMENT_NODE&&(t.elementTag=n.tagName),t}function it(n,t){var i=r(n);return{index:i,parent:r(n.parentNode),previous:r(n.previousSibling),next:r(n.nextSibling),source:null,action:null,tag:t}}function wr(n){var i=null,t=null;try{t=n.getBoundingClientRect()}catch(r){}return t&&(i={x:Math.round(t.left),y:Math.round(t.top),width:Math.round(t.width),height:Math.round(t.height)}),i}function br(n,t,i){for(var r,f,e=n.attributes,s=n.tagName,o={},u=0;u<e.length;u++)(r=e[u],f=r.name.toLowerCase(),i&&s==="IMG"&&f==="src")||(o[r.name]=t&&oi.indexOf(f)>=0?pt(r.value):r.value);return o}function kr(n){var t=window.getComputedStyle(n),r={};return tt.length===0&&(tt=t[i.Color]),rt(t[i.Visibility],["hidden","collapse"])&&(r[i.Visibility]=t[i.Visibility]),rt(t[i.OverflowX],["auto","scroll","hidden"])&&(r[i.OverflowX]=t[i.OverflowX]),rt(t[i.OverflowY],["auto","scroll","hidden"])&&(r[i.OverflowY]=t[i.OverflowY]),t[i.BackgroundImage]!=="none"&&(r[i.BackgroundImage]=t[i.BackgroundImage]),rt(t[i.BackgroundColor],["rgba(0, 0, 0, 0)","transparent"])||(r[i.BackgroundColor]=t[i.BackgroundColor]),t[i.Color]!==tt&&(r[i.Color]=t[i.Color]),Object.keys(r).length>0?r:null}function rt(n,t){return t.indexOf(n)>-1}function dr(n,t){var f=r(n),i=gr(n,t?t.ignore:!1),u=nu(n,t?t.forceMask:!1),e=ar(n,i,u);return{index:f,ignore:i,forceMask:u,state:e}}function gr(n,i){var r=i,u;if(!i)switch(n.nodeType){case Node.ELEMENT_NODE:u=n.tagName;(u===s.Script||u===s.Meta)&&(r=!0);break;case Node.COMMENT_NODE:r=!0;break;case Node.TEXT_NODE:t.cssRules&&n.parentNode&&n.parentNode.tagName==="STYLE"&&(r=!0)}return r}function nu(n,t){var i=t;return i||n&&n.nodeType===Node.ELEMENT_NODE&&(i=n.getAttribute(ci)==="true"),i}function eu(n){var t=document.documentElement;return[{index:1,event:n.type,pointer:"mouse",x:"pageX"in n?n.pageX:"clientX"in n?n.clientX+t.scrollLeft:null,y:"pageY"in n?n.pageY:"clientY"in n?n.clientY+t.scrollTop:null,width:1,height:1,pressure:1,tiltX:0,tiltY:0,target:n.target&&e in n.target?n.target[e]:null,buttons:n.buttons}]}function ou(n){for(var t,r=[],u=document.documentElement,o=n.type==="touchstart"||n.type==="touchmove"?1:0,f=n.changedTouches||[],i=0;i<f.length;i++)t=f[i],r.push({index:t.identifier+2,event:n.type,pointer:"touch",x:"clientX"in t?t.clientX+u.scrollLeft:null,y:"clientY"in t?t.clientY+u.scrollTop:null,width:"radiusX"in t?t.radiusX:"webkitRadiusX"in t?t.webkitRadiusX:0,height:"radiusY"in t?t.radiusY:"webkitRadiusY"in t?t.webkitRadiusY:0,pressure:"force"in t?t.force:"webkitForce"in t?t.webkitForce:.5,tiltX:0,tiltY:0,target:n.target&&e in n.target?n.target[e]:null,buttons:o});return r}function lu(n){return cu[n]}function dt(n,i,r,u){var o=t.uploadHandler||pu,f=i.envelope.sequenceNumber,s=vi(!0,f,r),h=vi(!1,f,u),e;y[f]={compressed:n,raw:i,failureCount:0};o(n,s,h);t.debug&&(e=JSON.stringify(i).length,b("** Upload #"+bt+": Batch #"+f+(" "+Math.round(n.length/1024)+"KB")+(" ("+Math.round(e/1024)+"KB Raw). **")));bt++}function au(n,t){var i={compressed:n,raw:t,failureCount:0};kt.push(i)}function vu(){gt(kt)}function yu(){et=0;bt=0;kt=[];y={};ot=[]}function gt(n){if(n.length>0){var t=n.shift(),i=function(){gt(n)};dt(t.compressed,t.raw,i,i)}}function pu(n,i,r){if(t.uploadUrl.length>0){n=JSON.stringify(n);var u=new XMLHttpRequest;u.open("POST",t.uploadUrl);u.setRequestHeader("Content-Type","application/json");u.onreadystatechange=function(){wu(u,i,r)};u.send(n)}}function wu(n,t,i){n.readyState===XMLHttpRequest.DONE&&(n.status<200||n.status>208?i(n.status):t(n.status))}function bu(n){var i,r;if(b("SUCCESS: Delivered batch #"+n),i=y[n],delete y[n],et+=i.compressed.length,o===1&&et>t.totalLimit){r={type:3,bytes:et};h(r);w();return}gu()}function ku(n,i){b("FAILED: Delivery failed for batch #"+n+" Status: "+i);var r=y[n];r.failureCount++;du(n,i,r);r.failureCount<=t.reUploadLimit&&ot.push(n)}function du(n,t,i){var r=i.raw.events,u={type:2,requestStatus:t,sequenceNumber:n,compressedLength:i.compressed.length,rawLength:JSON.stringify(i.raw).length,firstEventId:yt(r[0]),lastEventId:yt(r[r.length-1]),attemptNumber:i.failureCount};h(u)}function gu(){for(var n=[],t;ot.length>0;)t=ot.shift(),n.push(y[t]);gt(n)}function vi(n,t,i){var r=n?bu:ku,u=document[p];return function(n){var f=document[p];o===1&&f===u&&(r(t,n),i&&i(n))}}function nf(){o=3;try{sf()}catch(n){lf(n);return}try{var t=hf();if(t)cf();else{w();return}}catch(n){nr(n);return}o=1}function w(){var t,u,f,i,r,n;if(o===3||o===1){for(o=4,t=0,u=ri;t<u.length;t++)f=u[t],f.teardown();for(i in l)if(l.hasOwnProperty(i))for(r=l[i],n=0;n<r.length;n++)r[n].target.removeEventListener(i,r[n].listener);a&&a.terminate();o=2;h({type:4});of();delete document[p]}}function u(n,t,i){var r=l[t]||[];n.addEventListener(t,i,!1);r.push({target:n,listener:i});l[t]=r}function f(n,i){i===void 0&&(i=!0);var r={id:ki++,time:at(n.time)?n.time:g(),type:n.type,state:n.state},u=rr(r),f={type:0,event:u,time:g(),isXhrErrorEvent:n.type===pi&&n.state.type===2};a&&a.postMessage(f);d[r.id]=u;i&&(clearTimeout(di),di=setTimeout(uf,t.delay))}function tf(n){var t,i;if(n.length>0){for(t=0;t<n.length-1;t++)f(n[t],!1);i=n[n.length-1];f(i,!0)}}function rf(n){if(o===1){var t={type:9,key:n};h(t);st=!1;vu()}}function uf(){if(a){var n={type:1,time:g()};a.postMessage(n)}}function g(n,t){var i=n?gi():ef();return t?i:Math.round(i)}function h(n){t.instrument&&f({type:pi,state:n})}function ff(n){var r,t,u,i,f;if(o!==2){r=n.data;switch(r.type){case 2:for(t=r,st?au(t.compressedData,t.rawData):dt(t.compressedData,t.rawData),ii=t.rawData.envelope.sequenceNumber+1,u=t.rawData.events,i=0;i<u.length;i++)f=yt(u[i]),delete d[f]}}}function gi(){return window.performance&&performance.now&&performance.timing?performance.now()+performance.timing.navigationStart:(new Date).getTime()}function ef(){return window.performance&&performance.now?performance.now():(new Date).getTime()-wi}function of(){var n,i,t,u,f,r,e;if(!st){for(n=[],i=Object.keys(d),t=0;t<i.length;t++)u=i[t],f=d[u],n.push(f);n.length>0&&(c.sequenceNumber=ii++,c.time=g(),r={envelope:c,events:n},e=ui(JSON.stringify(r)),dt(e,r))}}function sf(){var n,i;if(ei(ni)||hr(ni,fi()),bi=ei(ni),ti=fi(),wi=gi(),ii=0,c={clarityId:bi,impressionId:ti,url:window.location.href,version:yi},ir(),yu(),t.customInstrumentation){n=t.customInstrumentation();c.extraInfo={};for(i in n)n.hasOwnProperty(i)&&n[i]&&(c.extraInfo[i]=n[i])}ri=[];l={};d=[];st=t.backgroundMode;ki=0;a=ur(c,ff)}function hf(){if(!af())return!1;if(document[p]){var n={type:6,currentImpressionId:document[p]};return h(n),!1}return document[p]=ti,u(window,"beforeunload",w),u(window,"unload",w),!0}function cf(){for(var f,u,i,n=0,r=t.plugins;n<r.length;n++)f=r[n],u=lu(f),u&&(i=new u,i.reset(),i.activate(),ri.push(i))}function lf(n){try{nr(n)}catch(n){}}function nr(n){var t={type:8,error:n.message};h(t);w()}function af(){for(var n,u,f,t=[],i=0,e=["document.implementation.createHTMLDocument","document.documentElement.classList","Function.prototype.bind","window.Worker"];i<e.length;i++){var o=e[i],s=o.split("."),r=window;for(n=0,u=s;n<u.length;n++){if(f=u[n],typeof r[f]=="undefined"){t.push(o);break}r=r[f]}}return t.length>0?(h({type:1,missingFeatures:t}),!1):!0}function vf(n){o!==1&&(ct(n,null,!0,t),nf())}function yf(){w()}function pf(n){rf(n)}var t={plugins:["viewport","layout","pointer","performance","errors"],uploadUrl:"",urlBlacklist:[],delay:500,batchLimit:102400,totalLimit:20971520,reUploadLimit:1,showText:!1,showImages:!1,sensitiveAttributes:[],timeToYield:50,instrument:!1,cssRules:!1,uploadHandler:null,customInstrumentation:null,debug:!1,validateConsistency:!1,backgroundMode:!1},tr=function(){function n(){this.reset()}return n.prototype.reset=function(){this.schemas=[];this.schemaToIdMap={}},n.prototype.addSchema=function(n){var t=JSON.stringify(n),i=!(t in this.schemaToIdMap);return i&&(this.schemaToIdMap[t]=this.schemas.length,this.schemas.push(n)),i},n.prototype.createSchema=function(n,t){var i=t||null;return n!==null&&(i=typeof n=="object"&&(n.constructor===Object||n.constructor===Array)?this.createNestedSchema(n,t):typeof t=="string"?t:null),i},n.prototype.getSchema=function(n){return this.schemas[n]},n.prototype.getSchemaId=function(n){return this.schemaToIdMap[JSON.stringify(n)]},n.prototype.createNestedSchema=function(n,t){var i=null,r=null,u;return n.constructor===Object?(i=0,r=this.createObjectSchema(n)):n.constructor===Array&&(i=1,r=this.createArraySchema(n)),u=[i,r],typeof t=="string"&&u.unshift(t),u},n.prototype.createObjectSchema=function(n){for(var i=[],r=Object.keys(n),t=0;t<r.length;t++){var u=r[t],f=n[u],e=this.createSchema(f,u);i.push(e)}return i},n.prototype.createArraySchema=function(n){for(var r,i=[],t=0;t<n.length;t++)r=this.createSchema(n[t]),i.push(r);return i},n}(),nt=new tr,rr=function(n){var t=nt.createSchema(n.state),i=nt.addSchema(t),r=ht(n.state),u=i?t:nt.getSchemaId(t);return[n.id,n.type,n.time,r,u]},ui=function(n){var s=6,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(n){return k.charAt(n)},v;if(n==null)return"";for(var u,r,l={},y={},a="",p="",f="",c=2,b=3,e=2,o=[],t=0,i=0,w=0;w<n.length;w+=1)if(a=n.charAt(w),Object.prototype.hasOwnProperty.call(l,a)||(l[a]=b++,y[a]=!0),p=f+a,Object.prototype.hasOwnProperty.call(l,p))f=p;else{if(Object.prototype.hasOwnProperty.call(y,f)){if(f.charCodeAt(0)<256){for(u=0;u<e;u++)t=t<<1,i==s-1?(i=0,o.push(h(t)),t=0):i++;for(r=f.charCodeAt(0),u=0;u<8;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1}else{for(r=1,u=0;u<e;u++)t=t<<1|r,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=0;for(r=f.charCodeAt(0),u=0;u<16;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1}c--;c==0&&(c=Math.pow(2,e),e++);delete y[f]}else for(r=l[f],u=0;u<e;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1;c--;c==0&&(c=Math.pow(2,e),e++);l[p]=b++;f=String(a)}if(f!==""){if(Object.prototype.hasOwnProperty.call(y,f)){if(f.charCodeAt(0)<256){for(u=0;u<e;u++)t=t<<1,i==s-1?(i=0,o.push(h(t)),t=0):i++;for(r=f.charCodeAt(0),u=0;u<8;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1}else{for(r=1,u=0;u<e;u++)t=t<<1|r,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=0;for(r=f.charCodeAt(0),u=0;u<16;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1}c--;c==0&&(c=Math.pow(2,e),e++);delete y[f]}else for(r=l[f],u=0;u<e;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1;c--;c==0&&(c=Math.pow(2,e),e++)}for(r=2,u=0;u<e;u++)t=t<<1|r&1,i==s-1?(i=0,o.push(h(t)),t=0):i++,r=r>>1;for(;;)if(t=t<<1,i==s-1){o.push(h(t));break}else i++;v=o.join("");switch(v.length%4){default:case 0:return v;case 1:return v+"===";case 2:return v+"==";case 3:return v+"="}},or=function(){function n(){}return n.prototype.activate=function(){u(window,"error",sr)},n.prototype.reset=function(){return},n.prototype.teardown=function(){return},n}(),e="clarity-index",cr=["value","placeholder","alt","title"],s,i,tt,oi,ci,v,et,bt,kt,y,ot;(function(n){n.Meta="META";n.Script="SCRIPT";n.Doc="*DOC*";n.Text="*TXT*";n.Ignore="*IGNORE*"})(s||(s={})),function(n){n.Color="color";n.BackgroundColor="backgroundColor";n.BackgroundImage="backgroundImage";n.OverflowX="overflowX";n.OverflowY="overflowY";n.Visibility="visibility"}(i||(i={}));ci="data-clarity-mask";var wt="cl-final",ut="cl-new",k="cl-moved",li="cl-updated",tu=function(){function n(){this.doc=document.implementation.createHTMLDocument("ShadowDom");this.nextIndex=0;this.removedNodes=this.doc.createElement("div");this.shadowDomRoot=this.doc.createElement("div");this.classifyNodes=!1;this.nodeMap={};this.doc.documentElement.appendChild(this.shadowDomRoot);this.shadowDocument=document.createElement("div")}return n.prototype.getShadowNode=function(n){return at(n)?this.nodeMap[n]:null},n.prototype.getNodeInfo=function(n){var t=this.getShadowNode(n);return t?t.info:null},n.prototype.insertShadowNode=function(n,t,i){var f=n===document,e=this.assignNodeIndex(n),u=f?this.shadowDomRoot:this.getShadowNode(t),o=this.getShadowNode(i),r=this.doc.createElement("div");return r.id=""+e,r.node=n,r.computeInfo=function(){var t=r.parentNode,i=dr(n,t?t.info:null);return r.info=i,i},this.nodeMap[e]=r,f&&(this.shadowDocument=r),this.classifyNodes&&this.setClass(r,ut),vt(!!u,"insertShadowNode","parent is missing"),u&&(o?u.insertBefore(r,o):u.appendChild(r)),r},n.prototype.moveShadowNode=function(n,t,i){var r=this.getShadowNode(n),u=this.getShadowNode(t),f=this.getShadowNode(i);return vt(!!u,"moveShadowNode","parent is missing"),vt(!!r,"moveShadowNode","shadowNode is missing"),u&&r&&(this.classifyNodes&&(this.hasClass(r,ut)||this.setClass(r,k)),f?u.insertBefore(r,f):u.appendChild(r)),r},n.prototype.updateShadowNode=function(n){var t=this.getShadowNode(n);t&&this.classifyNodes&&this.setClass(t,li)},n.prototype.removeShadowNode=function(n){var t=this.getShadowNode(n);t&&(this.setClass(t,k),this.removedNodes.appendChild(t))},n.prototype.applyMutationBatch=function(n){var l=this.nextIndex,h,r,t,u,f,e,o,c,i,s;for(this.doc.documentElement.appendChild(this.removedNodes),this.classifyNodes=!0,h=n.length,r=0;r<h;r++){t=n[r];u=t.target;switch(t.type){case"attributes":case"characterData":this.applyUpdate(u,t.attributeName,t.oldValue);break;case"childList":for(f=t.addedNodes.length,i=f-1;i>=0;i--)e=t.previousSibling,o=t.nextSibling,i>0&&(e=t.addedNodes[i-1]),i<f-1&&(o=t.addedNodes[i+1]),this.applyInsert(t.addedNodes[i],u,e,o,!1);for(c=t.removedNodes.length,i=0;i<c;i++)this.applyRemove(t.removedNodes[i],u)}}return this.removedNodes.parentElement.removeChild(this.removedNodes),s=this.getMutationSummary(),this.cleanUp(),this.reIndexNewNodes(s.newNodes,l),s},n.prototype.hasClass=function(n,t){return n?n.classList.contains(t):!1},n.prototype.setClass=function(n,t){n&&n.classList.add(t)},n.prototype.removeClass=function(n,t){n&&n.classList.remove(t)},n.prototype.removeAllClasses=function(n){n&&n.removeAttribute("class")},n.prototype.getMutationSummary=function(){for(var r,u,f,t,e=this,i={newNodes:[],movedNodes:[],updatedNodes:[],removedNodes:[]},o=Array.prototype.slice.call(this.doc.getElementsByClassName(ut)),n=0;n<o.length;n++)r=o[n],i.newNodes.push(r),this.removeAllClasses(r);for(u=Array.prototype.slice.call(this.doc.getElementsByClassName(k)),n=0;n<u.length;n++)t=u[n],i.movedNodes.push(t),this.removeClass(t,k);for(f=Array.prototype.slice.call(this.doc.getElementsByClassName(li)),n=0;n<f.length;n++)t=f[n],i.updatedNodes.push(t),this.removeAllClasses(t);return lt(this.removedNodes,function(n){e.hasClass(n,k)&&!e.hasClass(n,ut)&&i.removedNodes.push(n)},!1),i},n.prototype.createIndexJson=function(n,t){var i=[];return this.writeIndexToJson(n,i,t),i},n.prototype.isConsistent=function(){return this.isConstentSubtree(document,this.shadowDocument)},n.prototype.cleanUp=function(){var i=this,t,n;for(lt(this.removedNodes,function(n){var t=r(n.node);delete n.node[e];delete i.nodeMap[t]},!1),t=Array.prototype.slice.call(this.doc.getElementsByClassName(wt)),n=0;n<t.length;n++)this.removeAllClasses(t[n]);this.removedNodes.innerHTML="";this.classifyNodes=!1},n.prototype.writeIndexToJson=function(n,t,i){var f=i(n),u=[],r=n.firstChild;for(t.push(f),r&&t.push(u);r;)this.writeIndexToJson(r,u,i),r=r.nextSibling},n.prototype.isConsistentNode=function(n,t){var i=r(n);return at(i)&&t.id===i.toString()&&t.node===n},n.prototype.isConstentSubtree=function(n,t){for(var u=this.isConsistentNode(n,t),i=n.firstChild,r=t.firstChild;u;)if(i&&r)u=this.isConstentSubtree(i,r),i=i.nextSibling,r=r.nextSibling;else if(i||r)u=!1;else break;return u},n.prototype.applyInsert=function(n,t,i,u,f){var o=r(n),s=r(t),c=r(u),l=this.shouldProcessChildListMutation(n,t)||f,h,e;if(l)if(o===null)for(h=this.insertShadowNode(n,s,c),this.setClass(h,wt),e=n.lastChild;e;)this.applyInsert(e,n,e.previousSibling,e.nextSibling,!0),e=e.previousSibling;else this.moveShadowNode(o,s,r(u))},n.prototype.applyRemove=function(n,t){var i=r(n),u;i!==null&&(u=this.shouldProcessChildListMutation(n,t),u&&this.removeShadowNode(i))},n.prototype.applyUpdate=function(n){var t=r(n);t!=null&&this.updateShadowNode(t)},n.prototype.shouldProcessChildListMutation=function(n,t){var f=r(n),e=r(t),i=null,u;return f===null?i=this.getShadowNode(e):(u=this.getShadowNode(f),i=u&&u.parentNode),i&&!this.hasClass(i,wt)},n.prototype.reIndexNewNodes=function(n,t){var i=this;n.map(function(n){var t=r(n.node);delete i.nodeMap[t]});n.map(function(n){n.node[e]=t;n.id=""+t;i.nodeMap[t]=n;t++});this.nextIndex=t},n.prototype.assignNodeIndex=function(n){var t=r(n);return t===null&&(t=this.nextIndex,this.nextIndex++),n[e]=t,t},n}(),iu=function(){function n(){this.eventName="Layout";this.distanceThreshold=5}return n.prototype.reset=function(){this.shadowDom=new tu;this.inconsistentShadowDomCount=0;this.watchList=[];this.observer=window.MutationObserver?new MutationObserver(this.mutation.bind(this)):null;this.mutationSequence=0;this.lastConsistentDomJson=null;this.firstShadowDomInconsistentEvent=null;lr()},n.prototype.activate=function(){this.discoverDom();this.observer&&this.observer.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},n.prototype.teardown=function(){var t,i,n,r;for(this.observer&&this.observer.disconnect(),t=this.shadowDom.shadowDocument,t.node&&delete t.node[e],i=this.shadowDom.shadowDocument.querySelectorAll("*"),n=0;n<i.length;n++)r=i[n].node,r&&delete r[e]},n.prototype.discoverDom=function(){var n=this;lt(document,function(t){var i=n.discoverNode(t);i.state.action=0;i.state.source=0;f({type:n.eventName,state:i.state})});this.checkConsistency({action:0})},n.prototype.discoverNode=function(n){var t=this.shadowDom.insertShadowNode(n,r(n.parentNode),r(n.nextSibling));return t.computeInfo()},n.prototype.watch=function(n,t){if(n.nodeType===Node.ELEMENT_NODE&&!this.watchList[t.index]){var i=n,r=t,f=r.layout&&("scrollX"in r.layout||"scrollY"in r.layout);f&&(u(i,"scroll",this.layoutHandler.bind(this,i,2)),this.watchList[r.index]=!0);i.tagName==="INPUT"||i.tagName==="SELECT"?(u(i,"change",this.layoutHandler.bind(this,i,3)),this.watchList[r.index]=!0):i.tagName==="TEXTAREA"&&(u(i,"input",this.layoutHandler.bind(this,i,3)),this.watchList[r.index]=!0)}},n.prototype.layoutHandler=function(n,i){var v=r(n),e=this.shadowDom.getNodeInfo(v),u,o,a;if(e){u=e.state;switch(i){case 2:var s=Math.round(n.scrollLeft),h=Math.round(n.scrollTop),c=u.layout.scrollX-s,l=u.layout.scrollY-h;c*c+l*l>this.distanceThreshold*this.distanceThreshold&&(u.source=i,u.action=1,u.layout.scrollX=s,u.layout.scrollY=h,f({type:this.eventName,state:u}));break;case 3:o=n;a=t.showText&&!e.forceMask;u.attributes.value=a?o.value:pt(o.value);u.source=i;u.action=1;f({type:this.eventName,state:u})}}},n.prototype.mutation=function(n){if(this.allowMutation()){var t=g(),i=this.shadowDom.applyMutationBatch(n),r={action:1,mutationSequence:this.mutationSequence,batchSize:n.length};this.checkConsistency(r);this.allowMutation()&&this.processMutations(i,t)}this.mutationSequence++},n.prototype.allowMutation=function(){return this.inconsistentShadowDomCount<2||!t.validateConsistency},n.prototype.processMutations=function(n){var t=n.newNodes.map(this.processMutation.bind(this,0)),i=n.movedNodes.map(this.processMutation.bind(this,3)),r=n.updatedNodes.map(this.processMutation.bind(this,1)),u=n.removedNodes.map(this.processMutation.bind(this,2)),f=[].concat(t,i,r,u);tf(f)},n.prototype.processMutation=function(n,t){var i=t.computeInfo().state;return i.action=n,i.source=1,i.mutationSequence=this.mutationSequence,n===0||n===1?this.watch(t.node,i):n===2&&(i.index=parseInt(t.id,10)),{type:this.eventName,state:i}},n.prototype.checkConsistency=function(n){var u,f,e,i;t.validateConsistency&&(u=this.shadowDom.createIndexJson(document,function(n){return r(n)}),f=this.shadowDom.isConsistent(),f?(this.inconsistentShadowDomCount=0,this.firstShadowDomInconsistentEvent=null,this.lastConsistentDomJson=u):(this.inconsistentShadowDomCount++,e=this.shadowDom.createIndexJson(this.shadowDom.shadowDocument,function(n){return parseInt(n.id,10)}),i={type:7,dom:u,shadowDom:e,lastConsistentShadowDom:this.lastConsistentDomJson,lastAction:n},this.inconsistentShadowDomCount<2?this.firstShadowDomInconsistentEvent=i:(i.firstEvent=this.firstShadowDomInconsistentEvent,h(i)),b(">>> ShadowDom doesn't match PageDOM after mutation batch #"+this.mutationSequence+"!")))},n}(),ru="NavigationTiming",ai="ResourceTiming",uu="PerformanceStateError",fu=function(){function n(){this.timeoutLength=1e3;this.stateError=!1;this.incompleteEntryIndices=[]}return n.prototype.activate=function(){this.timing&&(this.logTimingTimeout=setTimeout(this.logTiming.bind(this),this.timeoutLength));this.getEntriesByType&&(this.logResourceTimingTimeout=setTimeout(this.logResourceTiming.bind(this),this.timeoutLength))},n.prototype.reset=function(){this.lastInspectedEntryIndex=-1;this.stateError=!1;this.incompleteEntryIndices=[];this.urlBlacklist=t.urlBlacklist.map(this.getFullUrl);this.timing=window.performance&&performance.timing;this.getEntriesByType=window.performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType.bind(performance)},n.prototype.teardown=function(){clearTimeout(this.logTimingTimeout);clearTimeout(this.logResourceTimingTimeout)},n.prototype.logTiming=function(){var n,t;this.timing.loadEventEnd>0?(n=this.timing.toJSON?this.timing.toJSON():this.timing,n=ct(n,function(t){return n[t]===0?0:Math.round(n[t]-n.navigationStart)},!1),t={timing:n},f({type:ru,state:t})):this.logTimingTimeout=setTimeout(this.logTiming.bind(this),this.timeoutLength)},n.prototype.logResourceTiming=function(){var i=this.getEntriesByType("resource"),r,u,n,t;for(i.length<this.lastInspectedEntryIndex+1&&(this.stateError||(this.stateError=!0,f({type:uu,state:{}})),this.lastInspectedEntryIndex=-1,this.incompleteEntryIndices=[]),r=this.incompleteEntryIndices.slice(),this.incompleteEntryIndices=[],n=0;n<r.length;n++)u=r[n],t=this.inspectEntry(i[u],u),t&&f({type:ai,state:t});for(n=this.lastInspectedEntryIndex+1;n<i.length;n++)t=this.inspectEntry(i[n],n),t&&f({type:ai,state:t}),this.lastInspectedEntryIndex=n;this.logResourceTimingTimeout=setTimeout(this.logResourceTiming.bind(this),this.timeoutLength)},n.prototype.inspectEntry=function(n,t){var i=null;return n&&n.responseEnd>0?this.urlBlacklist.indexOf(n.name)<0&&(i={duration:n.duration,initiatorType:n.initiatorType,startTime:n.startTime,connectStart:n.connectStart,connectEnd:n.connectEnd,requestStart:n.requestStart,responseStart:n.responseStart,responseEnd:n.responseEnd,name:n.name},"transferSize"in n&&(i.transferSize=n.transferSize),"encodedBodySize"in n&&(i.encodedBodySize=n.encodedBodySize),"decodedBodySize"in n&&(i.decodedBodySize=n.decodedBodySize),"nextHopProtocol"in n&&(i.protocol=n.nextHopProtocol),i=ct(i,function(n,t){return typeof t=="number"?Math.round(t):t},!0)):this.incompleteEntryIndices.push(t),i},n.prototype.getFullUrl=function(n){var t=document.createElement("a");return t.href=n,t.href},n}();v=Object.freeze({transform:eu});var ft=Object.freeze({transform:ou}),su=function(){function n(){this.eventName="Pointer";this.distanceThreshold=20;this.timeThreshold=500}return n.prototype.activate=function(){u(document,"mousedown",this.pointerHandler.bind(this,v));u(document,"mouseup",this.pointerHandler.bind(this,v));u(document,"mousemove",this.pointerHandler.bind(this,v));u(document,"mousewheel",this.pointerHandler.bind(this,v));u(document,"click",this.pointerHandler.bind(this,v));u(document,"touchstart",this.pointerHandler.bind(this,ft));u(document,"touchend",this.pointerHandler.bind(this,ft));u(document,"touchmove",this.pointerHandler.bind(this,ft));u(document,"touchcancel",this.pointerHandler.bind(this,ft))},n.prototype.teardown=function(){},n.prototype.reset=function(){this.lastMoveState=null;this.lastMoveTime=0},n.prototype.pointerHandler=function(n,t){for(var u,f=n.transform(t),i=0,r=f;i<r.length;i++)u=r[i],this.processState(u,t.timeStamp)},n.prototype.processState=function(n,t){switch(n.event){case"mousemove":case"touchmove":(this.lastMoveState==null||this.checkDistance(this.lastMoveState,n)||this.checkTime(t))&&(this.lastMoveState=n,this.lastMoveTime=t,f({type:this.eventName,state:n}));break;default:f({type:this.eventName,state:n})}},n.prototype.checkDistance=function(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r>this.distanceThreshold*this.distanceThreshold},n.prototype.checkTime=function(n){return n-this.lastMoveTime>this.timeThreshold},n}(),hu=function(){function n(){this.eventName="Viewport";this.distanceThreshold=20;this.body=document.body;this.documentElement=document.documentElement}return n.prototype.activate=function(){this.processState(this.getViewport("discover"));u(window,"scroll",this.viewportHandler.bind(this));u(window,"resize",this.viewportHandler.bind(this));u(window,"pageshow",this.viewportHandler.bind(this));u(window,"pagehide",this.viewportHandler.bind(this));u(document,"visibilitychange",this.viewportHandler.bind(this))},n.prototype.teardown=function(){},n.prototype.reset=function(){this.lastViewportState=null},n.prototype.viewportHandler=function(n){var t=this.getViewport(n.type);this.processState(t)},n.prototype.getViewport=function(n){return{viewport:{x:"pageXOffset"in window?window.pageXOffset:this.documentElement.scrollLeft,y:"pageYOffset"in window?window.pageYOffset:this.documentElement.scrollTop,width:"innerWidth"in window?window.innerWidth:this.documentElement.clientWidth,height:"innerHeight"in window?window.innerHeight:this.documentElement.clientHeight},document:{width:this.body?this.body.clientWidth:null,height:this.getDocumentHeight()},dpi:"devicePixelRatio"in window?window.devicePixelRatio:-1,visibility:"visibilityState"in document?document.visibilityState:"default",event:n}},n.prototype.getDocumentHeight=function(){var n=this.body?this.body.clientHeight:null,t=this.body?this.body.scrollHeight:null,i=this.body?this.body.offsetHeight:null,r=this.documentElement?this.documentElement.clientHeight:null,u=this.documentElement?this.documentElement.scrollHeight:null,f=this.documentElement?this.documentElement.offsetHeight:null;return Math.max(n,t,i,r,u,f)},n.prototype.processState=function(n){var t=!0;n.event!=="scroll"||this.lastViewportState===null||this.checkDistance(this.lastViewportState,n)||(t=!1);t&&(this.lastViewportState=n,f({type:this.eventName,state:n}))},n.prototype.checkDistance=function(n,t){var i=n.viewport.x-t.viewport.x,r=n.viewport.y-t.viewport.y;return i*i+r*r>this.distanceThreshold*this.distanceThreshold},n}(),cu={layout:iu,viewport:hu,pointer:su,performance:fu,errors:or};var yi="0.1.42",p="clarity-iid",pi="Instrumentation",ni="ClarityID",wi,bi,ti,ii,c,ri,l,ki,d,st,a,di,o=0;l={};n.start=vf;n.stop=yf;n.trigger=pf;n.version=yi;Object.defineProperty(n,"__esModule",{value:!0})}),function(){function t(){setTimeout(function(){clarity.start(n);sj_evt.bind("clarity.trigger",function(n){var t=n[1]||"";clarity.trigger(t);typeof _w.sj_log!="undefined"&&sj_log("CI.ClarityTrigger","Trigger",t)},!0)},i)}function r(t,i,r){var s={T:"CI.Clarity",FID:"CI",Name:"ClarityBg",P:t},o,h,e;t=JSON.stringify(s);typeof _w.Log2!="undefined"&&Log2.LogEvent?Log2.LogEvent("ClientInst",s,null,null,null,null,null,null):(o=Math.round(f()),h="<E><T>Event.ClientInst<\/T><IG>"+_G.IG+"<\/IG><TS>"+o+"<\/TS><D><![CDATA[["+t.replace("]\]>","]]]\]><![CDATA[>")+"]]\]><\/D><\/E>",t="<ClientInstRequest><Events>"+h+"<\/Events><STS>"+o+"<\/STS><\/ClientInstRequest>",e=new XMLHttpRequest,e.open("POST",n.uploadUrl),e.setRequestHeader("Content-Type","text/xml"),e.onreadystatechange=function(){u(e,i,r)},e.send(t))}function u(n,t,i){n.readyState===XMLHttpRequest.DONE&&(n.status<200||n.status>208?i(n.status):t(n.status))}function f(){return _w.performance&&performance.now?performance.now()+performance.timing.navigationStart:(new Date).getTime()}var n={uploadUrl:"/fd/ls/lsp.aspx",urlBlacklist:["/fd/ls/lsp.aspx","/web/xls.aspx","/homepage/xls.aspx","/threshold/xls.aspx","/AS/IEOneBox/xls.aspx"],showText:!0,showImages:!0,instrument:!0,uploadHandler:r,validateConsistency:!1,backgroundMode:!0},i=3e3;typeof clarity!="undefined"&&(sj_evt.bind("ajax.unload",clarity.stop),sj_evt.bind("ajax.load",t),t())}()